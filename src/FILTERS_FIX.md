# üîç Catalog Filters Fix

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **1. –§–∏–ª—å—Ç—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§–∏–ª—å—Ç—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã
- –ù–µ—Ç —Å–≤—è–∑–∏ —Å URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
`FilterSidebar.tsx` –±—ã–ª —Å—Ç–∞—Ç–∏—á–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å URL –∏ API

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏–∑ API:**
```tsx
const loadCollections = async () => {
  const data = await publicApi.getCollections()
  setCollections(data)
}
```

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
```tsx
const [searchParams, setSearchParams] = useSearchParams()

const handleCollectionChange = (value: string, checked: boolean) => {
  if (checked) {
    searchParams.set('collection', value)
  } else {
    searchParams.delete('collection')
  }
  setSearchParams(searchParams)
}
```

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ
- –¶–µ–Ω–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å debounce 500ms –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞

‚úÖ **–¢–µ–ø–µ—Ä—å —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç!**

---

### **2. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –Ω–∞–∂–∏–º–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù—É–∂–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–º–µ–Ω–∏—Ç—å" –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ù–µ—É–¥–æ–±–Ω—ã–π UX

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

1. **–ö–æ–ª–ª–µ–∫—Ü–∏–∏ - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```tsx
<input
  type="checkbox"
  checked={selectedCollection === collection.name}
  onChange={(e) =>
    handleCollectionChange(collection.name, e.target.checked)
  }
/>
```

2. **–¶–µ–Ω–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å debounce:**
```tsx
onChange={(e) => {
  setPriceMin(e.target.value)
  const timer = setTimeout(() => {
    if (e.target.value) {
      searchParams.set('minPrice', e.target.value)
      setSearchParams(searchParams)
    }
  }, 500) // –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 500ms –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–≤–æ–¥–∞
  return () => clearTimeout(timer)
}}
```

3. **–£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã" –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö:**
```tsx
// –ë—ã–ª–æ:
<button>–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>

// –°—Ç–∞–ª–æ:
<button>–ó–∞–∫—Ä—ã—Ç—å</button>
```

‚úÖ **–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

---

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ñ–∏–ª—å—Ç—Ä—ã

### **1. –ö–æ–ª–ª–µ–∫—Ü–∏–∏:**
- –ö–ª–∏–∫ –Ω–∞ checkbox ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è URL: `?collection=SPORTS`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã

### **2. –¶–µ–Ω–∞:**
- –í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ 500ms
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Å—Ç–∞–ª –ø–µ—á–∞—Ç–∞—Ç—å ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è URL: `?minPrice=10000&maxPrice=50000`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã

### **3. –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ —Ç–µ–≥–∏ –Ω–∞–¥ —Ç–æ–≤–∞—Ä–∞–º–∏
- –ö–ª–∏–∫ –Ω–∞ —Ç–µ–≥ ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
- –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ" ‚Üí —Å–±—Ä–æ—Å –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### **components/FilterSidebar.tsx:**

```diff
+ import { useSearchParams } from 'react-router-dom'
+ import { publicApi } from '../services/publicApi'

+ const [searchParams, setSearchParams] = useSearchParams()
+ const [collections, setCollections] = useState<any[]>([])

+ useEffect(() => {
+   loadCollections()
+ }, [])

+ const loadCollections = async () => {
+   const data = await publicApi.getCollections()
+   setCollections(data)
+ }

+ const handleCollectionChange = (value: string, checked: boolean) => {
+   if (checked) {
+     searchParams.set('collection', value)
+   } else {
+     searchParams.delete('collection')
+   }
+   setSearchParams(searchParams)
+ }

- // –°—Ç–∞—Ç–∏—á–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- const FILTERS: FilterSection[] = [...]

+ // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–∑ API
+ {collections.map((collection) => (
+   <input
+     type="checkbox"
+     checked={selectedCollection === collection.name}
+     onChange={(e) =>
+       handleCollectionChange(collection.name, e.target.checked)
+     }
+   />
+ ))}

- <button>–ü–†–ò–ú–ï–ù–ò–¢–¨</button> // –£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ü–µ–Ω—ã
```

### **pages/Catalog.tsx:**

```diff
  {/* Active Filters */}
  {activeFilters.map(([key, value]) => (
    <button onClick={() => removeFilter(key)}>
-     <span>{value}</span>
+     <span className="uppercase">
+       {key === 'collection' ? value : 
+        key === 'minPrice' ? `–û—Ç ${value}‚ÇΩ` : 
+        key === 'maxPrice' ? `–î–æ ${value}‚ÇΩ` : value}
+     </span>
    </button>
  ))}

  {/* Mobile drawer */}
- <button>–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
+ <button>–ó–∞–∫—Ä—ã—Ç—å</button>
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–æ:**
- ‚ùå –§–∏–ª—å—Ç—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùå –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã
- ‚ùå –ù—É–∂–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"
- ‚ùå –ù–µ—É–¥–æ–±–Ω—ã–π UX

### **–ü–æ—Å–ª–µ:**
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ API
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è (–∫–æ–ª–ª–µ–∫—Ü–∏–∏)
- ‚úÖ Debounce –¥–ª—è —Ü–µ–Ω—ã (500ms)
- ‚úÖ –£–¥–æ–±–Ω—ã–π UX

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

### **1. –§–∏–ª—å—Ç—Ä –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, SPORTS)
3. –¢–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
4. URL –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è: `?collection=SPORTS`

### **2. –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ:**
1. –í–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30000)
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 500ms
3. –¢–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. URL –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è: `?minPrice=30000`

### **3. –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
1. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤
2. –ù–∞–¥ —Ç–æ–≤–∞—Ä–∞–º–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Ç–µ–≥–∏
3. –ö–ª–∏–∫ –Ω–∞ —Ç–µ–≥ ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞
4. "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ" ‚Üí —Å–±—Ä–æ—Å –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–§–∏–ª—å—Ç—Ä—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"!
